<!DOCTYPE html>

<html>

<head>
	<title>My Rentals - DomaHub</title>
	<%- include("../templates/head_links"); %>
	<link rel="stylesheet" href="/css/lib/fullcalendar.min.css" type="text/css" />
	<link rel="stylesheet" href="/css/min/profile_general.min.css" type="text/css" />
	<link rel="stylesheet" href="/css/min/calendar_modal.min.css" type="text/css" />
</head>

<body>
	<%- include("../templates/navbar", {user: user}); %>

	<section class="section is-medium min-height">
		<div class="container">
			<div class="columns">
				<div class="column is-half">
					<div class="tabs is-fullwidth is-toggle is-medium">
						<ul>
					    <li><a tabindex="1" href="/profile/mylistings">My Listings</a></li>
					    <li class="is-active"><a tabindex="1">My Rentals</a></li>
					  </ul>
					</div>
				</div>
			</div>
			<div id="filters" class="is-hidden columns">
				<div class="column">
					<nav class="level filter-panel">
						<div class="level-item">
							<a class="is-active filter-local is-hidden-mobile" id="active_filter" tabindex="1">
								Active
							</a>
						</div>
						<div class="level-item">
							<a class="filter-local is-hidden-mobile" id="expiring_filter" tabindex="1">
								Expiring
							</a>
						</div>
						<div class="level-item">
							<a class="filter-local is-hidden-mobile" id="expired_filter" tabindex="1">
								Expired
							</a>
						</div>
						<div class="level-item">
							<a class="filter-local is-hidden-mobile" id="reset_filter" tabindex="1">
								View All
							</a>
						</div>
						<div class="level-item">
							<div class="control is-expanded has-icon has-addons">
								<i class="fa fa-search"></i>
								<input id="search-domain" tabindex="1" class="input is-expanded" type="text" placeholder="Search my rentals" />
								<a class="button is-primary no-shadow is-hidden-tablet">
									<span class="icon">
										<i class="fa fa-bars"></i>
									</span>
								</a>
							</div>
						</div>
					</nav>
				</div>
			</div>
			<div class="columns">
				<div class="column is-12">
					<div class="rows-exist">
						<table class="table has-shadow">
							<thead class="has-shadow">
								<tr>
									<th class="td-arrow"></th>
									<th class="td-domain">
										Domain Name
										<span class="icon is-small is-active sort-desc is-hidden"><i class="fa fa-sort-desc"></i></span>
										<span class="icon is-small is-active sort-asc is-hidden"><i class="fa fa-sort-asc"></i></span>
										<span class="icon is-small sort-none is-disabled"><i class="fa fa-sort"></i></span>
									</th>
									<th class="td-status is-hidden-mobile">
										Status
										<span class="icon is-small is-active sort-desc is-hidden"><i class="fa fa-sort-desc"></i></span>
										<span class="icon is-small is-active sort-asc is-hidden"><i class="fa fa-sort-asc"></i></span>
										<span class="icon is-small sort-none is-disabled"><i class="fa fa-sort"></i></span>
									</th>
									<th class="td-address is-hidden-mobile">
										<span class='margin-left-10'>Address</span>
										<span class="icon is-small is-active sort-desc is-hidden"><i class="fa fa-sort-desc"></i></span>
										<span class="icon is-small is-active sort-asc is-hidden"><i class="fa fa-sort-asc"></i></span>
										<span class="icon is-small sort-none is-disabled"><i class="fa fa-sort"></i></span>
									</th>
									<th class="td-view is-hidden-mobile"></th>
								</tr>
							</thead>
							<tbody id="table_body">
								<tr>
									<td colspan="999" class="is-loading has-text-centered padding-50">
										Loading rentals...
									</td>
								</tr>
							</tbody>
						</table>

						<nav class="pagination margin-bottom-25">
							<a id="prev-page" class="button no-shadow is-hidden">Previous page</a>
							<a id="next-page" class="button no-shadow is-hidden">Next page</a>
							<ul id="page-list"></ul>
						</nav>

						<nav class="pagination-control">
							<div id="domains-per-page-control" class="is-hidden control is-horizontal">
								<div class="control-label">
									<label class="label">Show per page:</label>
								</div>
								<div class="control">
									<div class="select">
										<select id="domains-per-page">
											<option selected value="5">5</option>
											<option value="25">25</option>
											<option value="50">50</option>
											<option value="100">100</option>
										</select>
									</div>
								</div>
							</div>
							<div id="go-to-page-control" class="is-hidden control">
								<p class="control has-addons has-addons-right">
									<input id="go-to-page-input" class="input" type="number" min="1" value="1" />
									<a id="go-to-page-button" class="button is-primary">
										Go to page
									</a>
								</p>
							</div>
						</nav>

					</div>
				</div>

			</div>
		</div>
		<div id="listing-modal" class="modal">
			<div class="modal-background"></div>
			<div class="modal-container-calendar">
				<div id="calendar-modal-content" class="listing-modal-content">
					<div id="calendar-modal-top">
						<nav class="level">
							<div class="level-left">
								<% if (!user) { %>
									<div class="level-item">
										<a tabindex="1" id="calendar-back-button" class="button no-shadow">
											<span class="icon">
											<i class="fa fa-angle-left"></i>
										  </span>
										  <span>Go Back</span>
										</a>
									</div>
								<% } %>
								<div class="level-item">
									<a tabindex="1" class="button is-danger no-shadow is-disabled" id="remove_events">Remove New Rentals</a>
								</div>
								<div class="level-item">
									<a tabindex="1" class="button is-info no-shadow is-disabled" id="rent-beginning-button">Go To Rental Start</a>
								</div>
								<div class="level-item">
									<a tabindex="1" class="button no-shadow is-disabled" id="today-button">Today</a>
								</div>
							</div>
							<div class="level-right">
								<div class="level-item">
									<a tabindex="1" id="redirect-next-button" class="button no-shadow is-primary is-disabled">
										<span>Next</span>
										<span class="icon">
											<i class="fa fa-angle-right"></i>
										</span>
									</a>
								</div>
							</div>
						</nav>
						<div class="columns">
							<div class="column is-half">
								<div class="content">
									<h2 class="is-bold">Use the calendar below to rent your desired time slot.</h2>
									<p id="calendar-error-message">
									</p>
								</div>
							</div>
							<div class="column flex-column-center">
								<div class="content has-text-centered">
									<h1 class="is-inline-block">
										Total:
									</h1>
									<h1 id="price" class="is-inline-block">$0</h1>
								</div>
							</div>
						</div>
					</div>
					<div id="calendar-modal-bottom">
						<div id="calendar" class="margin-top-25"></div>
					</div>
				</div>
				<div id="checkout-modal-content" class="listing-modal-content is-hidden">
					<nav class="level">
						<div class="level-left">
							<div class="level-item">
								<a id="checkout-back-button" class="success-hide button no-shadow">
									<span class="icon">
										<i class="fa fa-angle-left"></i>
									</span>
									<span>Go Back</span>
								</a>
							</div>
						</div>
					</nav>
					<div class="columns">
						<div id="payment-column" class="column is-5">
							<div class="content">
								<h1 class="title is-3">Payment Information</h1>
								<p id="stripe-error-message">
									Please enter your payment information below.
								</p>
							</div>
							<form id="stripe-form" autocomplete="on">
								<label class="label">Credit or Debit Card Number *</label>
								<p class="control has-icon">
									<input tabindex="1" id="cc-num" data-stripe="number" class="input stripe-input is-medium" type="tel" placeholder="•••• •••• •••• ••••" autocomplete="cc-number"/>
									<i id="cc-icon" class="fa fa-credit-card"></i>
								</p>
								<div class="control is-grouped">
									<p class="control is-expanded">
										<label class="label">Expiration Date *</label>
										<input tabindex="1" id="cc-exp" maxlength="7" data-stripe="exp" class="input stripe-input is-medium" type="tel" placeholder="•• / ••" autocomplete="cc-exp"/>
									</p>
									<p class="control">
										<label class="label">Security Code *</label>
										<input tabindex="1" id="cc-cvc" data-stripe="cvc" class="input stripe-input is-medium" type="tel" placeholder="•••" autocomplete="off"/>
									</p>
								</div>
								<p class="control">
									<label class="label">Zip Code *</label>
									<input tabindex="1" id="cc-zip" maxlength="6" data-stripe="address_zip" class="input stripe-input is-medium" type="tel" autocomplete="postal-code" placeholder="•••••"/>
								</p>
								<p class="control is-bold">
									* Required fields
								</p>
							</form>
							<form class="checkbox-form margin-top-10">
								<input class="is-small" value="agree-to-terms" id="agree-to-terms" type="checkbox" />
								<label class="is-small" tabindex="1" for="agree-to-terms">
									I agree to the <a class="is-accent">Terms & Conditions</a>. I also agree to pay the total amount
									shown.
								</label>
							</form>
							<p class="control margin-top-20">
								<a id="checkout-button" class="button is-primary is-medium" tabindex="1">
									<span class="icon">
										<i class="fa fa-check-circle-o"></i>
									</span>
									<span>Confirm & Pay</span>
								</a>
							</p>
						</div>
						<div id="success-column" class="is-hidden column is-5">
							<div class="notification is-primary">
								<h1 class="title is-3 is-white">Transaction Successful!</h1>
							</div>
							<div class="content">
								<p>
									Your content will automatically display on
									<a id="href-domain" class="is-primary" href=""></a>
									at the designated rental time(s).
								</p>
							</div>
						</div>
						<div class="column is-2">
							<div id="linebreak"></div>
						</div>
						<div class="column is-4">
							<div class="content">
								<h1 class="title is-3">Rental Summary</h1>
								<p id="success-message">
									Please take a moment to review the summary below.
									You may edit the information on any of the previous
									pages by clicking the go back button.
								</p>
							</div>
							<div class="box">
								<div class="rental-summary-section">
									<div class="content">
										<h1 class="rental-domain-name title is-3 is-primary has-text-centered"></h1>
									</div>
								</div>
								<div class="rental-summary-section">
									<div class="columns">
										<div class="column is-half">
											<div class="content">
												<p id="preview-start-dates" class="is-bold">
													Rental Start
												</p>
											</div>
										</div>
										<div class="column is-half">
											<div class="content">
												<p id="preview-end-dates" class="is-bold">
													Rental End
												</p>
											</div>
										</div>
									</div>
									<p class="success-hide control is-expanded">
										<a tabindex="1" id="edit-dates-button" class="button is-primary is-fullwidth">Edit Dates</a>
									</p>
								</div>
								<div class="rental-summary-section">
									<div class="columns">
										<div class="column is-half">
											<div class="content">
												<h3 class="is-bold">
													Rate
												</h3>
											</div>
										</div>
										<div class="column is-half">
											<div id="preview-rates" class="content has-text-right"></div>
										</div>
									</div>
								</div>
								<div class="rental-summary-section">
									<div class="columns">
										<div class="column is-half">
											<div class="content">
												<h2 class="is-bold">
													Total
												</h2>
											</div>
										</div>
										<div class="column is-half">
											<div class="content has-text-right">
												<h2 id="price-total"></h2>
											</div>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</section>

	<%# keep calendar outside of modal and move it in with JS to fix weird bug of not appearing%>

	<%- include("../templates/footer"); %>
	<%- include("../templates/js_scripts"); %>
	<script src="/js/lib/moment.min.js" type="text/javascript"></script>
	<script src="/js/lib/fullcalendar.min.js" type="text/javascript"></script>
	<script src="/js/lib/wNumb.js" type="text/javascript"></script>
	<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
	<script src="/js/lib/jquery.payment.min.js" type="text/javascript"></script>
	<script type="text/javascript">
		//redirect to homepage if user is not defined
		var user = <% if(typeof user != "undefined"){ %><%-JSON.stringify(user)%><% }else{ %>window.location="/"<% } %>;
		var rentals = <% if(typeof rentals != "undefined"){ %><%-JSON.stringify(rentals)%><% }else{ %>""<% } %>;
	</script>
	<script src="/js/calendar_logic.js" type="text/javascript"></script>
	<script src="/js/checkout_logic.js" type="text/javascript"></script>
	<script src="/js/routes/profile/profile_myrentals_logic.js" type="text/javascript"></script>
	<script src="/js/routes/profile/profile_pagination_logic.js" type="text/javascript"></script>
</body>
</html>
