<!DOCTYPE html>

<html>

<head>
  <title>Dashboard - DomaHub</title>
  <link rel="stylesheet" href="/css/min/profile_dashboard.min.css" />
  <%- include("../templates/head_links"); %>
  <!-- Google Analytics -->
  <script type="text/javascript">
    (function(w,d,s,g,js,fs){
      g=w.gapi||(w.gapi={});g.analytics={q:[],ready:function(f){this.q.push(f);}};
      js=d.createElement(s);fs=d.getElementsByTagName(s)[0];
      js.src='https://apis.google.com/js/platform.js';
      fs.parentNode.insertBefore(js,fs);js.onload=function(){g.load('analytics');};
    }(window,document,'script'));
  </script>
  <script src="/js/lib/chart.min.js" type="text/javascript"></script>
  <script src="/js/lib/wNumb.js" type="text/javascript"></script>
  <script src="/js/lib/moment.min.js" type="text/javascript"></script>
  <script src="/js/lib/twix.min.js" type="text/javascript"></script>
  <script src="/js/lib/randomColor.js" type="text/javascript"></script>
</head>

<body>

  <%- include("profile_navbar_mobile.ejs"); %>

  <section class="section is-fullscreen">
    <div class="wrapper">

      <%- include("profile_navbar.ejs"); %>

      <div class="right-content">

        <div class="content">
          <h2 class="is-bold">Dashboard</h2>
          <p>
            Welcome <%= user.username %>!
          </p>
        </div>

        <div class="tile is-ancestor">
          <div class="tile is-vertical is-parent is-8">
            <div class="card is-fullwidth tile is-child">
              <div class="card-header">
                <h3 class="card-header-title">Traffic Overview</h3>
                <div class="control is-grouped">
                  <div class="control">
                    <button id="refresh-tables-button" class="button is-stylish is-small" title="Refresh Tables" tabindex="0">
                      <div class="icon is-small">
                        <i class="far fa-sync-alt"></i>
                      </div>
                      <span class="is-hidden-mobile">Refresh</span>
                    </button>
                  </div>
                  <div class="control">
                    <span class="select has-shadow is-stylish">
                      <select id="last-days-select">
                        <option value="7">Last 7 Days</option>
                        <option selected value="30">Last 30 Days</option>
                        <option value="90">Last 90 Days</option>
                        <option value="180">Last 180 Days</option>
                      </select>
                    </span>
                  </div>
                </div>
              </div>
              <div class="card-content">
                <div class='columns'>
                  <div class="column is-9">
                    <!-- sessions chart -->
                    <div class="content">
                      <div class="content">
                        <span id="current-stat-name">Unique Users</span> Over Time
                        <span class="icon is-small is-tooltip" data-balloon="Various metrics viewed over time." data-balloon-pos="up" data-balloon-length="medium">
                          <i class="far fa-question-circle"></i>
                        </span>
                      </div>
                      <div class="traffic-chart-wrapper">
                          <canvas id="time-chart" class="traffic-chart"></canvas>
                          <div id="time-chart-overlay" class="traffic-overlay content">
                            <div id="time-chart-overlay-none" class='has-text-centered traffic-overlay-text is-hidden'>
                              <figure class="image is-48x48">
                                <img src="/images/lib/ggface.png">
                              </figure>
                              <p>
                                There is not enough data!
                              </p>
                              <p>
                                Please try changing the date range.
                              </p>
                            </div>
                            <div id="time-chart-overlay-load" class='traffic-overlay-text has-text-centered'>
                              <p class='icon is-medium'><i class="far fa-spin fa-sync-alt"></i></p>
                              <p>Now loading <span id="current-stat-name-loading">unique users</span> data.</p>
                            </div>
                          </div>
                        </div>
                    </div>
                  </div>
                  <div class="column has-text-centered">
                    <div data-cumulative="true" data-stat="ga:users" data-stat-desc="Unique Users" class="stat-wrapper is-active" data-balloon="The total number of unique users for the requested time period." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        Unique Users
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="users-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                    <div data-cumulative="true" data-stat="ga:sessions" data-stat-desc="Unique Sessions" class="stat-wrapper"data-balloon="The total number of unique sessions for the requested time period." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        Unique Sessions
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="sessions-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                    <div data-cumulative="true" data-stat="ga:newUsers" data-stat-desc="New Users" class="stat-wrapper" data-balloon="The total number of new users for the requested time period." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        New</br>Users
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="new-users-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                    <div data-cumulative="false" data-tooltip-type="percent" data-stat="ga:percentNewSessions" data-stat-desc="% New Sessions" class="stat-wrapper" data-balloon="The percentage of sessions from new users for the requested time period." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        % New Sessions
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="new-sessions-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                    <div data-cumulative="false" data-stat="ga:sessionsPerUser" data-stat-desc="Sessions Per User" class="stat-wrapper" data-balloon="The average amount of sessions per user for the requested time period." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        Sessions Per User
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="sessions-per-user-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                    <div data-cumulative="true" data-stat="ga:pageviews" data-stat-desc="Pageviews" class="stat-wrapper" data-balloon="The total amount of pageviews for the requested time period." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        Total Pageviews
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="pageviews-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                    <div data-cumulative="false" data-tooltip-type="percent" data-stat="ga:bounceRate" data-stat-desc="Bounce Rate" class="stat-wrapper" data-balloon="The average percentage of sessions in which the user left the site from the first page." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        Bounce Rate
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="bounce-rate-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                    <div data-cumulative="false" data-tooltip-type="time" data-stat="ga:avgSessionDuration" data-stat-desc="Session Duration" class="stat-wrapper" data-balloon="The average duration of sessions for the requested time period." data-balloon-pos="up" data-balloon-length="medium">
                      <small class="heading">
                        Session Duration
                      </small>
                      <h1 class="counter">
                        <div class="counter-link">
                          <p id="session-duration-counter">Loading...</p>
                        </div>
                      </h1>
                    </div>
                  </div>
                </div>

                <div class="columns">

                  <!-- channels chart -->
                  <div class="column is-4">
                    <div class="content">
                      <p class="content">
                        How are users finding your listings?
                      </p>
                      <div class="traffic-chart-wrapper">
                        <canvas id="channels-chart" class="traffic-chart"></canvas>
                        <div id="channels-chart-overlay" class="traffic-overlay content">
                          <div id="channels-chart-overlay-none" class='has-text-centered traffic-overlay-text is-hidden'>
                            <figure class="image is-48x48">
                              <img src="/images/lib/ggface.png">
                            </figure>
                            <p>
                              There is not enough data!
                            </p>
                            <p>
                              Please try changing the date range.
                            </p>
                          </div>
                          <div id="channels-chart-overlay-load" class='traffic-overlay-text has-text-centered'>
                            <p class='icon is-medium'><i class="far fa-spin fa-sync-alt"></i></p>
                            <p>Now loading channel data.</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- countries chart -->
                  <div class="column is-4">
                    <div class="content">
                      <p class="content">
                        What countries are your users in?
                      </p>
                      <div class="traffic-chart-wrapper">
                        <canvas id="countries-chart" class="traffic-chart"></canvas>
                        <div id="countries-chart-overlay" class="traffic-overlay content">
                          <div id="countries-chart-overlay-none" class='has-text-centered traffic-overlay-text is-hidden'>
                            <figure class="image is-48x48">
                              <img src="/images/lib/ggface.png">
                            </figure>
                            <p>
                              There is not enough data!
                            </p>
                            <p>
                              Please try changing the date range.
                            </p>
                          </div>
                          <div id="countries-chart-overlay-load" class='traffic-overlay-text has-text-centered'>
                            <p class='icon is-medium'><i class="far fa-spin fa-sync-alt"></i></p>
                            <p>Now loading country data.</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>

                  <!-- sources chart -->
                  <div class="column is-4">
                    <div class="content">
                      <p class="content">
                        Which listings are the most popular?
                      </p>
                      <div class="traffic-chart-wrapper">
                        <canvas id="sources-chart" class="traffic-chart"></canvas>
                        <div id="sources-chart-overlay" class="traffic-overlay content">
                          <div id="sources-chart-overlay-none" class='has-text-centered traffic-overlay-text is-hidden'>
                            <figure class="image is-48x48">
                              <img src="/images/lib/ggface.png">
                            </figure>
                            <p>
                              There is not enough data!
                            </p>
                            <p>
                              Please try changing the date range.
                            </p>
                          </div>
                          <div id="sources-chart-overlay-load" class='traffic-overlay-text has-text-centered'>
                            <p class='icon is-medium'><i class="far fa-spin fa-sync-alt"></i></p>
                            <p>Now loading sources data.</p>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="tile is-vertical is-parent">
            <div class="card is-fullwidth tile is-child">
              <div class="card-header">
                <h3 class="card-header-title">Portfolio Overview</h3>
              </div>
              <div class="card-content">
                <div class="level is-mobile">
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Listings" href="<%= (user.listings.length > 0) ? "/profile/mylistings" : "/listings/create" %>">
                      <div class="content">
                        <small class="heading">
                          Total Listings
                        </small>
                        <h3 class="counter"><%= user.listings.length %></h3>
                      </div>
                    </a>
                  </div>
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Sold" href="/profile/mylistings?tab=offers">
                      <div class="content">
                        <small class="heading">
                          Domains Sold
                        </small>
                        <h3 id="sold-counter" class="counter"></h1>
                      </div>
                    </a>
                  </div>
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Unverified" href="/profile/mylistings?tab=verify">
                      <div class="content">
                        <small class="heading">
                          Unverified Listings
                        </small>
                        <h3 id="unverified-counter" class="counter"></h1>
                      </div>
                    </a>
                  </div>
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Expiring" href="/profile/mylistings">
                      <div class="content">
                        <small class="heading">
                          Expiring Domains
                        </small>
                        <h3 id="expiring-counter" class="counter">0</h1>
                      </div>
                    </a>
                  </div>
                </div>
                <div class="level is-mobile">
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Expenses" href="/profile/settings#transactions">
                      <div class="content">
                        <small class="heading">
                          Expenses YTD
                        </small>
                        <h3 id="expenses-counter" class="counter">$0</h1>
                      </div>
                    </a>
                  </div>
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Revenue" href="/profile/settings#transactions">
                      <div class="content">
                        <small class="heading">
                          Revenue YTD
                        </small>
                        <h3 id="revenue-counter" class="counter">$0</h1>
                      </div>
                    </a>
                  </div>
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Profit" href="/profile/settings#transactions">
                      <div class="content">
                        <small class="heading">
                          Profit YTD
                        </small>
                        <h3 id="profit-counter" class="counter">$0</h1>
                      </div>
                    </a>
                  </div>
                  <div class="overview-tile-wrapper level-item has-text-centered">
                    <a title="View Offers" href="/profile/mylistings?tab=offers">
                      <div class="content">
                        <small class="heading">
                          Outstanding Offers
                        </small>
                        <h3 id="offers-counter" class="counter"></h1>
                      </div>
                    </a>
                  </div>
                </div>
              </div>
            </div>
            <div class="card is-fullwidth tile is-child">
              <div class="card-header">
                <h3 class="card-header-title">Outstanding Offers</h3>
              </div>
              <div class="card-content">
                <div class="content">
                  <div id="no-offers" class="is-hidden media">
                    You don't have any outstanding offers!
                  </div>
                  <div id="offers-clone" class="is-hidden offers media">
                    <li>
                      <span class="offers-domain-name"></span>
                      <a class="offers-count is-primary is-underlined is-pulled-right"></a>
                    </li>
                  </div>
                </div>
              </div>
            </div>
            <div class="card is-fullwidth tile is-child">
              <div class="card-header is-primary">
                <h3 class="card-header-title is-white">Get Free Months of Premium</h3>
                <div class="card-header-icon">
                  <a tabindex="0" href="/features#pricing" class="button is-stylish is-small no-shadow">
                    <div class="icon is-small"><i class="far fa-question-circle"></i></div>
                    <span>What is Premium?</span>
                  </a>
                </div>
              </div>
              <div class="card-content">
                <div class="content">
                  <p>
                    Invite your friends and get a free month of premium for both you and your friend when they sign up for a Premium account!
                  </p>
                  <p>
                    Check the status of your existing invites in <a class="is-primary is-underlined" href="/profile/settings#premium" tabindex="0">Account Settings</a>.
                  </p>
                  <div class="control has-addons">
                    <input id="referral-link" value="https://domahub.com/signup/<%= user.username.toLowerCase() %>" class="input no-shadow" placeholder="Invite your friends!"/>
                    <a id="referral-link-copy" class="button is-stylish is-small no-shadow" tabindex="0">
                      <div class="icon is-small"><i id="referral-icon" class="far fa-clipboard" data-fa-transform="up-1"></i></div>
                      <span id="referral-link-text">Copy Link</span>
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </section>

  <script src="/js/routes/profile/profile_dashboard_logic.js" type="text/javascript"></script>
</body>

</html>
