<!DOCTYPE html>
<html>

<head>
    <title>Checkout - DomaHub</title>
    <link rel="stylesheet" type="text/css" href="/css/min/listing_checkout.min.css" />
    <%- include("../templates/head_links"); %>
</head>

<body>

    <section class="section is-medium min-height">
        <div class="container">
            <div class="columns">
                <div class="column is-7">
                    <header class="checkout-track margin-top-15">
                        <h2>Checkout</h2>
                    </header>
                    <div id="step-content-payment" class='step-content'>
                        <article class="message">
                            <div class="message-body">
                                <p id="payment-regular-message" class="regular-message">
                                    Please choose your preferred method of payment. Don't see your preferred method of payment? <a href="/contact" class="is-accent">Let us know!</a>
                                </p>
                                <p id="stripe-regular-message" class="is-hidden regular-message">
                                    Please enter your payment information. By clicking the Confirm & Pay button,
                                    you are agreeing to pay the entire amount shown as well as our <a href="/terms" class='is-accent'>Terms and Conditions</a>.
                                </p>
                                <p id="paypal-regular-message" class="is-hidden regular-message">
                                    Please log in to your PayPal account.
                                </p>
                                <p id="stripe-error-message" class="error-message is-danger is-hidden"></p>
                                <p id="stripe-success-message" class="regular-message is-hidden"></p>
                            </div>
                        </article>

                        <div id="choices-block">
                            <div id="stripe-choice" class="checkout-track content box no-shadow is-primary hover-effect choice-block">
                                <div class="step-box">
                                    <span class="icon is-medium is-primary">
                                        <i class="fa fa-credit-card"></i>
                                    </span>
                                    <h2>Pay with a card</h2>
                                </div>
                                <p>
                                    Pay with any major credit or debit card. Our payments are handled by a third party payments processor, <a target="_blank" href="https://stripe.com/about" class="is-accent">Stripe</a>.
                                </p>
                            </div>
                            <%# <div id="paypal-choice" class="checkout-track content box no-shadow is-info hover-effect choice-block">
                                <div class="step-box">
                                    <span class="icon is-medium is-info">
                                        <i class="fa fa-paypal"></i>
                                    </span>
                                    <h2>Pay with PayPal</h2>
                                </div>
                                <p>
                                    Login to your PayPal account and pay instantly using your PayPal balance or any of your saved payment methods.
                                </p>
                            </div>%>
                        </div>

                        <div id="choices-selected" style="display:none;">
                            <div id="stripe-choice-column" class="is-hidden choice-column">
                                <form id="stripe-form" autocomplete="on">
                                    <label class="label is-medium">Card Number</label>
                                    <p class="control has-icon">
                                        <input tabindex="0" id="cc-num" data-stripe="number" class="checkout-track input stripe-input is-medium" type="tel" placeholder="•••• •••• •••• ••••" autocomplete="cc-number"/>
                                        <i id="cc-icon" class="fa fa-credit-card"></i>
                                    </p>
                                    <div class="control is-grouped">
                                        <p class="control is-expanded">
                                            <label class="label is-medium">Expiration Date</label>
                                            <input tabindex="0" id="cc-exp" maxlength="7" data-stripe="exp" class="checkout-track input stripe-input is-medium" type="tel" placeholder="•• / ••" autocomplete="cc-exp"/>
                                        </p>
                                        <p class="control">
                                            <label class="label is-medium">Security Code</label>
                                            <input tabindex="0" id="cc-cvc" data-stripe="cvc" class="checkout-track input stripe-input is-medium" type="tel" placeholder="•••" autocomplete="off"/>
                                        </p>
                                    </div>
                                    <p class="control">
                                        <label class="label is-medium">Zip Code</label>
                                        <input tabindex="0" id="cc-zip" maxlength="6" data-stripe="address_zip" class="checkout-track input stripe-input is-medium" type="tel" autocomplete="postal-code" placeholder="•••••"/>
                                    </p>
                                </form>

                                <div class="control margin-top-30">
                                    <a tabindex="0" class="goback-button checkout-track button is-danger no-shadow is-stylish">Go Back</a>
                                    <a id="checkout-button" tabindex="0" class="checkout-track button is-primary no-shadow is-stylish">Confirm & Pay</a>
                                </div>
                            </div>
                            <div id="paypal-choice-column" class="is-hidden choice-column">
                                Log in with PayPal

                                <div class="control margin-top-30">
                                    <a tabindex="0" class="goback-button checkout-track button is-danger no-shadow is-stylish">Go Back</a>
                                </div>
                            </div>
                        </div>

                        <div id="checkout-success-content" class="success-hide is-hidden">
                            <div class="content">
                                <p>
                                    The owner of <strong><%= listing_info.domain_name %></strong> has been notified of your purchase and will reach out to you with details on how to take ownership of the domain.
                                </p>
                                <p>
                                    If you do not receive any communications from the domain owner, please do not hesitate to <a class="is-accent" href="/contact/">contact us</a>.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="column is-5">
                    <div class="card is-checkout">
                        <figure class="card-image img-wrapper" style="background-image:url('<%= listing_info.background_image || "https://source.unsplash.com/category/nature/375x150" %>')"></figure>
                        <div class="card-content">
                            <div class="content">
                                <h1 class="is-primary is-breakword"><%= listing_info.domain_name %></h1>
                            </div>
                            <div class="control-flex">
                                <p>Name</p>
                                <p class=""><%= new_buying_info.offerer_name %></p>
                            </div>
                            <div class="control-flex">
                                <p>Email Address</p>
                                <p class=""><%= new_buying_info.offerer_email %></p>
                            </div>
                            <div class="padding-bottom-15 has-border-bottom control-flex">
                                <p>Phone Number</p>
                                <p class=""><%= new_buying_info.offerer_phone %></p>
                            </div>
                            <div class="top control-flex">
                                <h3>Total Price</h3>
                                <h3 class="is-bold" id="total-price"></h3>
                            </div>
                        </div>
                        <footer id="edit-dates-button" class="card-footer">
                            <a id="edit-dates-path" tabindex="0" href="/listing/<%= listing_info.domain_name %>" class="checkout-track button is-stylish no-shadow is-fullwidth">Edit Offer</a>
                        </footer>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <%- include("../templates/footer"); %>
    <%- include("../templates/js_scripts"); %>
    <script src="/js/lib/moment.min.js" type="text/javascript"></script>
    <script src="/js/lib/wNumb.js" type="text/javascript"></script>
    <script src="https://js.stripe.com/v2/" type="text/javascript" ></script>
    <script src="/js/jquery/jquery.payment.min.js" type="text/javascript"></script>
    <script type="text/javascript">
        var listing_info = <% if(typeof listing_info != "undefined"){ %><%-JSON.stringify(listing_info)%><% }else{ %>""<% } %>;
        var new_buying_info = <% if(typeof new_buying_info != "undefined"){ %><%-JSON.stringify(new_buying_info)%><% }else{ %>""<% } %>;
    </script>
    <script src="/js/routes/listings/listing_checkout_logic_buy.js" type="text/javascript"></script>
</body>
</html>
