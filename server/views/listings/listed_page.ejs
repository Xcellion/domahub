<script src="/js/routes/main/random_characters.js" type="text/javascript"></script>
<script src="/js/lib/typed.js" type="text/javascript"></script>
<script src="/js/lib/daterangepicker.js" type="text/javascript"></script>
<script src="/js/routes/listings/listing_listed_logic.js" type="text/javascript"></script>

<div id="page-contents" class="is-hidden">
  <div class="listing-page">
    <section class="section">
      <div class="control is-spaced is-aligned-start">
        <div class="control">
          <div class="control is-flex-wrap">
            <%# BUYABLE TAG %>
            <div class="tag is-primary">
              <% if (listing_info.status == 1 && listing_info.buy_price > 0) { %>
                <span id="price-tag" class="is-hidden"></span>
              <% } else if (listing_info.status == 1){ %>
                <span>Now available!</span>
              <% } else { %>
                <span>Unavailable</span>
              <% } %>
            </div>

            <%# RENTABLE TAG %>
            <% if (listing_info.status == 1 && listing_info.rentable) { %>
            <div id="rent-price-tag" class="tag is-primary is-outlined">
              <span id="rent-price-text">
                <% if (listing_info.price_rate > 0){ %>
                  Rent: $<%= listing_info.price_rate %> / <%= listing_info.price_type %>
                <% } else { %>
                  Rent: Free
                <% } %>
              </span>
              <span id="free-until" class='is-hidden'></span>
            </div>
            <% } %>
          </div>
          <div class="control">
            <% if (listing_info.rentable) { %>
              <h1 id="domain-title" class="title is-2 is-inline-block is-primary"><%= listing_info.domain_name %></h1>
              <form id="path-input" class="is-hidden is-inline-block">
                <div class="control">
                  <input id="typed-slash" tabindex="0" type="text" autocomplete="off">
                  <label id="input-tooltip" style="display:none;" class="input-tooltip" for="typed-slash">Click to edit.</label>
                  <label id="input-tooltip-error" class="input-tooltip is-active is-hidden" for="typed-slash">Input must be alphanumeric!</label>
                </div>
              </form>
            <% } else { %>
              <h1 class="title is-3 is-primary is-inline-block"><%= listing_info.domain_name %></h1>
            <% } %>

            <%# DESCRIPTION AND CHECK AVAILABILITY MODULE %>
            <%- include("modules/desc_avail_module.ejs", {
                listing_info : listing_info
            });%>

          </div>
        </div>
        <div class="control">
          <figure class="image is-48x48">
            <img src="/images/dh-assets/circle-logo/dh-circle-logo-primary-225x225.png" />
          </figure>
        </div>
      </div>
    </section>
    <section class="section">
      <div class="listing-wrapper">
        <div class="listing-left">
          <div id="buy-rent-tabs" class="tabs is-boxed is-medium">
            <ul>
              <% if (listing_info.status == 1){ %>
              <li id="buy-tab" data-position="1" class="tab module-tab is-active">
                <a tabindex="0">Purchase</a>
              </li>
              <% } %>
              <% if (listing_info.rentable && listing_info.status == 1){ %>
                <li id="calendar-tab" data-position="2" class="tab module-tab">
                  <a tabindex="0">Rent</a>
                </li>
              <% } %>

              <% if ((listing_info.premium && listing_info.traffic_module) || !listing_info.premium || listing_info.unlisted){ %>
                <li id="traffic-tab" data-position="3" class='tab module-tab'>
                  <a tabindex="0">Traffic</a>
                </li>
              <% } %>

              <% if ((listing_info.premium && listing_info.history_module) || !listing_info.premium || listing_info.unlisted){ %>
                <li id="ticker-tab" data-position="4" class="tab module-tab">
                  <a tabindex="0">History</a>
                </li>
              <% } %>

              <% if (listing_info.domain_list) { %>
                <li id="domainlist-tab" data-position="5" class="tab module-tab">
                  <a tabindex="0">More Domains</a>
                </li>
              <% } %>

            </ul>
          </div>

          <%# SOLD MODULE %>
          <% if (listing_info.deposited) { %>
            <%- include("modules/sold_module.ejs"); %>
          <% } else { %>

            <% if (listing_info.status == 1) { %>
              <%# BUY NOW MODULE %>
              <%- include("modules/buy_now_module.ejs"); %>

            <% if (listing_info.rentable) { %>
              <%# CALENDAR MODULE %>
              <%- include("modules/calendar_module.ejs"); %>
            <% } %>
            <% } %>

          <% } %>

          <%# TRAFFIC MODULE %>
          <% if ((listing_info.premium && listing_info.traffic_module) || !listing_info.premium){ %>
          <%- include("modules/traffic_module.ejs", {
            listing_info : listing_info
          }); %>
          <% } %>

          <%# OTHER DOMAINS MODULE %>
          <% if ((listing_info.premium && listing_info.domain_list) || !listing_info.premium){ %>
          <%- include("modules/domain_list_module.ejs", {
            listing_info : listing_info
          }); %>
          <% } %>

          <%# HISTORY MODULE %>
          <% if ((listing_info.premium && listing_info.history_module) || !listing_info.premium){ %>
            <%- include("modules/ticker_module.ejs", {
              listing_info : listing_info
            }); %>
          <% } %>

        </div>
        <div class="listing-right">
          <%# INFO MODULE %>
          <%- include("modules/info_module.ejs", {
            listing_info : listing_info
          }); %>
        </div>
      </div>
    </section>
  </div>
</div>
