<!-- page to display listing information and calendar for rentals -->

<!DOCTYPE html>

<html>

	<head>
		<title>DomaHub - <%= listing_info.domain_name %></title>
		<%- include("../templates/head_links", {user: user});%>
		<link rel="stylesheet" href="/css/lib/fullcalendar.min.css" type="text/css" />
		<link rel="stylesheet" href="/css/listing_page.css" type="text/css" />
	</head>

	<body>
		<%- include("../templates/navbar", {user: user}); %>
		<%- include("../templates/listing_page") %>

		<div id="listing-modal" class="modal">
			<div class="modal-background"></div>
			<div class="modal-container-calendar">
				<% if (!user) { %>

					<div id="login-modal-content" class="modal-content listing-modal-content">
						<div class="columns">
							<div class="column is-half margin-bottom-50">
								<div class="content">
									<h3 class="is-bold">Log In / Create Account</h3>
									<p>
										You may either log into an existing account or proceed as a guest.
										If you do not already have a DomaHub account, we strongly recommend
										<a href="/signup" class="orange-link">signing up</a> before renting.
									</p>
								</div>
							</div>
						</div>
						<div class="columns">
							<div class="column is-5">
								<div class="content">
									<h3 class="is-bold">Existing User Login</h3>
									<small>
										Enter your information below to proceed.
									</small>
								</div>
								<form>
									<p class="control">
										<label class="label">Email</label>
										<input required class="input" autofocus name="email" type="email" id="email-input" spellcheck="false" value="" />
									</p>
									<p class="control">
										<label class="label">Password</label>
										<input required class="input" name="password" type="password" id="pw-input" autocomplete="new-password" value="" />
									</p>
									<p class="control">
										<a href="/forgot" class="orange-link">Forgot your password?</a>
									</p>
									<p class="control">
										<a class="button is-primary is-medium is-fullwidth">Log In</a>
									</p>
								</form>
							</div>
							<div class="column is-2">
								<div id="linebreak">

								</div>
							</div>
							<div class="column is-5">
								<div class="content">
									<h3 class="is-bold">Continue as a Guest</h3>
									<small>
										You may continue your transaction as a guest. However,
										you will not have access to essential configuration tools
										until you create a DomaHub account. There will be an option
										to create an account at the end of this transaction.
									</small>
									<p class="control margin-top-25">
										<a id="guest-button" class="button is-primary is-medium is-fullwidth">Proceed as Guest</a>
									</p>
								</div>
							</div>
						</div>
					</div>

					<div id="calendar-modal-content" class="modal-content listing-modal-content is-hidden">
				<% } else { %>
					<div id="calendar-modal-content" class="modal-content listing-modal-content">
				<% } %>
					<nav class="level">
						<div class="level-left">
							<% if (!user) { %>
								<div class="level-item">
									<a id="calendar-back-button" class="button no-shadow">
										<span class="icon">
									    <i class="fa fa-angle-left"></i>
									  </span>
									  <span>Go Back</span>
									</a>
								</div>
							<% } %>
							<div class="level-item">
								<a class="button is-danger no-shadow" id="remove_events">Remove Selected</a>
							</div>
							<div class="level-item">
								<a class="button no-shadow" id="month_button">Month View</a>
							</div>
							<div class="level-item">
								<a class="button no-shadow" id="today-button">Today</a>
							</div>
						</div>
						<div class="level-right">
							<div class="level-item">
								<a id="redirect-next-button" class="button no-shadow is-primary is-disabled">
									<span>Next</span>
									<span class="icon">
										<i class="fa fa-angle-right"></i>
								  	</span>
								</a>
							</div>
						</div>
					</nav>
					<div class="columns">
						<div class="column is-half has-borderRight">
							<div class="content">
								<h1>Select your desired times.</h1>
								<p>
									Click a cell on the calendar to reserve that time slot.
									You may select whole days by clicking on date cell.
									Use the buttons at the top to remove all selected cells or
									change calendar views.
								</p>
							</div>
						</div>
						<div class="column is-3">
							<div class="content padding-5">
								<%- include("../templates/listing_prices") %>
							</div>
						</div>
						<div class="column is-3 flex-column-center">
							<div class="content has-text-centered">
								<h1 class="is-inline-block is-normal">Total: </h1>
								<h1 id="price" class="is-inline-block"></h1>
							</div>
						</div>
					</div>

				</div>
				<div id="redirect-modal-content" class="modal-content listing-modal-content is-hidden">
					<nav class="level">
						<div class="level-left">
							<div class="level-item">
								<a id="redirect-back-button" class="button no-shadow">
									<span class="icon">
								    <i class="fa fa-angle-left"></i>
								  </span>
								  <span>Go Back</span>
								</a>
							</div>
						</div>
						<div class="level-right">
							<div class="level-item">
								<a id="preview-next-button" class="button is-disabled is-primary no-shadow">
									<span>Review</span>
									<span class="icon">
								    	<i class="fa fa-angle-right"></i>
								  	</span>
								</a>
							</div>
						</div>
					</nav>
					<h1 class="margin-bottom-15">Now connect your content to <span class="is-primary is-bold"><%= listing_info.domain_name %></span>.<h1>
					<div class="columns">
						<div class="column is-half">
							<div class="content">
								<p>
									The content of the URL you link below will be displayed when anyone
									goes to your rental domain name. You may change this URL at any time.
								</p>
							</div>
						</div>
					</div>
					<p class="control has-icon">
						<input required class="input is-medium" id="address_form_input" type="url" placeholder="Enter your URL">
						<i class="fa fa-link"></i>
					</p>
					<div class="content margin-top-50">
						<h3 class="is-bold">Need Help?</h3>
						<p>Here are examples of some things you can connect to your new domain rental.</p>
					</div>
					<div class="columns">
						<div class="column is-half">
							<div class="box">
								<div class="content">
									<a href="https://www.slidesjs.com"><h3 class="is-bold is-accent">SlidesJS</h3></a>
									<p>
										SlidesJS is a responsive slideshow plug-in for jQuery.
									</p>
								</div>
								<div class="columns">
									<div class="column">
										<figure class="image is128x128">
											<img src="/images/main/listing_slidejs.PNG" />
										</figure>
									</div>
									<div class="column">
										<a class="button">Get Started</a>
									</div>
								</div>
							</div>
						</div>
						<div class="column is-half">
							<div class="box">
								<div class="content">
									<a href="https://www.kickresume.com"><h3 class="is-bold is-accent">Kickresume</h3></a>
									<p>
										Create a resume, cover letter, or personal website in minutes with Kickresume.
									</p>
								</div>
								<div class="columns">
									<div class="column">
										<figure class="image is128x128">
											<img src="/images/main/listing_kickresume.PNG" />
										</figure>
									</div>
									<div class="column">
										<a class="button">Get Started</a>
									</div>
								</div>
							</div>
						</div>
					</div>
					<%# <div class="columns">
						<div class="column is-half">
							<div class="box">

							</div>
						</div>
						<div class="column is-half">
							<div class="box">

							</div>
						</div>
					</div>%>
				</div>
				<div id="preview-modal-content" class="modal-content listing-modal-content is-hidden">
					<nav class="level">
						<div class="level-left">
							<div class="level-item">
								<a id="preview-back-button" class="button no-shadow">
									<span class="icon">
										<i class="fa fa-angle-left"></i>
									</span>
									<span>Go Back</span>
								</a>
							</div>
						</div>
						<div class="level-right">
							<div class="level-item">
								<a id="checkout-button" class="button is-primary no-shadow">
									<span class="icon">
										<i class="fa fa-shopping-cart"></i>
									</span>
									<span>Checkout</span>
								</a>
							</div>
						</div>
					</nav>
					<div class="columns">
						<div class="column is-6">
							<div class="content">
								<h2 class="is-bold margin-bottom-25">Rental Summary</h2>
								<h1 class="title is-3 is-primary has-text-centered"><%= listing_info.domain_name %></h1>
							</div>
							<div class="columns">
								<div class="column is-half">
									<p id="preview-start-dates" class="is-bold">
										Rental Start
									</p>
								</div>
								<div class="column is-half">
									<p id="preview-end-dates" class="is-bold">
										Rental End
									</p>
								</div>
							</div>
							<div class="columns has-borderBottom">
								<div class="column">
									<p class="control is-expanded">
										<a id="edit-dates-button" class="button is-primary is-fullwidth">Edit Dates</a>
									</p>
								</div>
							</div>
							<div class="columns has-borderBottom">
								<div class="column is-half">
									<div class="content">
										<p class="is-bold">
											Rate
										</p>
									</div>
								</div>
								<div class="column is-half">
									<div id="preview-rates" class="content has-text-right"></div>
								</div>
							</div>
							<div class="columns">
								<div class="column is-half">
									<div class="content">
										<p class="is-bold">
											Total
										</p>
									</div>
								</div>
								<div class="column is-half">
									<div class="content has-text-right">
										<p id="price-total"></p>
									</div>
								</div>
							</div>
							<small>
								Please take a moment to review the summary above.
								You may edit any information by pressing the go back button.
							</small>
						</div>
						<div class="column is-1">
							<div id="linebreak">

							</div>
						</div>
						<div class="column is-5">
							<div class="content">
								<h2 class="is-bold">Payment Information</h2>
								<p id="stripe-error-message">
									Please enter your payment information below.
								</p>
								<!-- <iframe id="preview-iframe"></iframe> -->
							</div>
							<form id="stripe-form" autocomplete="on">
								<label class="label">Credit or Debit Card Number</label>
								<p class="control has-icon">
									<input id="cc-num" data-stripe="number" class="input stripe-input" type="tel" placeholder="•••• •••• •••• ••••" autocomplete="cc-number"/>
									<i class="fa fa-credit-card"></i>
									<i class="fa fa-cc-visa is-hidden"></i>
									<i class="fa fa-cc-diners-club is-hidden"></i>
									<i class="fa fa-cc-jcb is-hidden"></i>
									<i class="fa fa-cc-mastercard is-hidden"></i>
									<i class="fa fa-cc-amex is-hidden"></i>
									<i class="fa fa-cc-discover is-hidden"></i>
								</p>
								<div class="control is-grouped">
									<p class="control is-expanded">
										<label class="label">Expiration Date</label>
										<input id="cc-exp" maxlength="9" data-stripe="exp" class="input stripe-input" type="tel" placeholder="•• / ••••" autocomplete="cc-exp"/>
									</p>
									<p class="control">
										<label class="label">Security Code</label>
										<input id="cc-cvc" data-stripe="cvc" class="input stripe-input" type="tel" placeholder="•••" autocomplete="off"/>
									</p>
								</div>
								<p class="control">
									<label class="label">Zip Code</label>
									<input id="cc-zip" maxlength="6" data-stripe="address_zip" class="input stripe-input" type="tel" autocomplete="postal-code" placeholder="•••••"/>
								</p>
								<p class="control">
									<img src="/images/companies/stripe/stripe-powered.png" />
								</p>
							</form>
						</div>
					</div>
				</div>
			</div>
			<button class="modal-close"></button>
		</div>

		<%# keep calendar outside of modal and move it in with JS to fix weird bug of not appearing%>
		<div id="calendar"></div>

		<%- include("../templates/footer"); %>
		<%- include("../templates/js_scripts"); %>
		<script src="/js/lib/moment.min.js" type="text/javascript"></script>
		<script src="/js/lib/fullcalendar.min.js" type="text/javascript"></script>
		<script src="/js/lib/wNumb.js" type="text/javascript"></script>
		<script type="text/javascript" src="https://js.stripe.com/v2/"></script>
		<script src="/js/lib/jquery.payment.min.js" type="text/javascript"></script>
		<script type="text/javascript">
			var listing_message = <% if(typeof listing_message != "undefined"){ %><%-JSON.stringify(listing_message)%><% }else{ %>""<% } %>;
			var listing_info = <% if(typeof listing_info != "undefined"){ %><%-JSON.stringify(listing_info)%><% }else{ %>""<% } %>;
			var new_rental_info = <% if(typeof new_rental_info != "undefined"){ %><%-JSON.stringify(new_rental_info)%><% }else{ %>""<% } %>;
			var rental_info = <% if(typeof rental_info != "undefined"){ %><%-JSON.stringify(rental_info)%><% }else{ %>""<% } %>;
		</script>
		<script src="/js/routes/calendar/calendar_listed_logic.js" type="text/javascript"></script>
		<script src="/js/routes/calendar/calendar_general_logic.js" type="text/javascript"></script>
		<script src="/js/routes/listings/listing_listed_logic.js" type="text/javascript"></script>
		<script src="/js/routes/listings/listing_general_logic.js" type="text/javascript"></script>

	</body>

</html>
